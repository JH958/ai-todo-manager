---
description: AI 할 일 관리 웹 서비스 개발 규칙
globs: ["**/*.tsx", "**/*.ts", "**/*.jsx", "**/*.js"]
alwaysApply: true
---

# AI 할 일 관리 웹 서비스 개발 규칙

## 1. 프로젝트 특성

### 1.1 기술 아키텍처
- **Next.js 15 App Router** 기반의 웹 애플리케이션
- 서버 컴포넌트와 클라이언트 컴포넌트를 적절히 분리하여 사용
- App Router의 파일 기반 라우팅 시스템을 따름

### 1.2 사용자 경험 최우선 원칙
- **로딩 상태 UI**: 모든 비동기 작업에 대해 로딩 상태를 표시
  - Skeleton, Spinner 등 적절한 로딩 UI 컴포넌트 사용
  - Suspense 경계를 적절히 활용
- **빈 상태 UI**: 데이터가 없을 때를 대비한 빈 상태 화면 제공
  - Empty 컴포넌트를 활용하여 사용자에게 안내
- **오류 상태 UI**: 오류 발생 시 사용자 친화적인 오류 메시지 표시
  - Toast, Alert 등으로 오류 알림
  - 에러 바운더리를 활용하여 예기치 못한 오류 처리
- **상호작용 지연 최소화**: 
  - Optimistic UI 업데이트 고려
  - 로컬 상태 먼저 업데이트 후 서버 동기화
  - 사용자 입력에 대한 즉각적인 피드백 제공

### 1.3 오류 처리 철저
- **서버 측 오류 처리**: 
  - API 라우트 및 서버 액션에서 try-catch로 모든 예외 포착
  - 적절한 HTTP 상태 코드 반환
- **클라이언트 측 오류 처리**:
  - 컴포넌트 내에서 발생할 수 있는 오류를 예상하여 처리
  - ErrorBoundary 컴포넌트 활용
- **오류 메시지 표시**:
  - 사용자에게는 한글로 친절하고 명확한 메시지 제공
  - 기술적인 세부사항은 숨기고 사용자가 이해하기 쉬운 표현 사용
- **개발 환경 로깅**:
  - 개발 환경(`process.env.NODE_ENV === 'development'`)에서는 상세한 오류 로그를 콘솔에 출력
  - 프로덕션 환경에서는 민감한 정보를 포함하지 않도록 주의

## 2. 기술 스택

### 2.1 필수 프레임워크 및 라이브러리
- **Next.js 15**: App Router 기반의 React 프레임워크
- **TypeScript**: 타입 안정성을 위한 필수 사용 (strict 모드 권장)
- **Tailwind CSS**: 유틸리티 퍼스트 CSS 프레임워크로 스타일링
- **Shadcn/ui**: 재사용 가능한 UI 컴포넌트 라이브러리
- **Supabase**: 인증(Auth), 데이터베이스(DB) 및 기타 백엔드 서비스
- **AI SDK**: AI 모델 연동을 위한 SDK

### 2.2 개발 도구
- **ESLint**: Next.js 및 TypeScript 규칙 기반의 코드 품질 검사
- ESLint 규칙을 준수하고, 린트 오류는 배포 전에 반드시 해결

### 2.3 패키지 관리
- `package.json`에 명시된 버전을 정확히 따름
- 새로운 패키지 추가 시 `npm install` 또는 적절한 패키지 매니저 사용

## 3. 코딩 스타일

### 3.1 컴포넌트 작성 규칙
- **함수형 컴포넌트**: 클래스 컴포넌트 대신 함수형 컴포넌트를 기본으로 사용
- **화살표 함수**: 모든 함수(컴포넌트 포함)는 화살표 함수로 작성
  ```typescript
  // ✅ 올바른 예시
  const TodoList = () => {
    return <div>...</div>;
  };
  
  // ❌ 피해야 할 예시
  function TodoList() {
    return <div>...</div>;
  }
  ```

### 3.2 파일 명명 규칙
- **컴포넌트 파일**: 파스칼 케이스(PascalCase)로 저장
  - 예: `TodoList.tsx`, `UserProfile.tsx`, `TaskItem.tsx`
- **유틸리티 파일**: 케이밥 케이스(kebab-case) 또는 카멜 케이스(camelCase)
  - 예: `api-utils.ts`, `format-date.ts` 또는 `formatDate.ts`
- **훅 파일**: `use-` 접두사 + 케이밥 케이스
  - 예: `use-mobile.ts`, `use-todo.ts`

### 3.3 주석 및 문서화 규칙
- **한글 주석 필수**: 모든 함수 및 컴포넌트 상단에 한 문장 개요를 한글로 작성
- **JSDoc 한글 작성**: JSDoc 주석도 한글로 기술하며, TypeScript 타입을 사용
  ```typescript
  /**
   * 할 일 목록을 렌더링하는 컴포넌트
   * @param todos - 표시할 할 일 목록
   * @returns 할 일 목록 UI
   */
  const TodoList = ({ todos }: { todos: Todo[] }): JSX.Element => {
    // 할 일 목록을 순회하며 각 항목을 렌더링
    return (
      <ul>
        {todos.map((todo) => (
          <TodoItem key={todo.id} todo={todo} />
        ))}
      </ul>
    );
  };
  ```

### 3.4 타입 정의
- **TypeScript 타입 명시**: 모든 함수의 매개변수와 반환 타입을 명시
- **인터페이스/타입 정의**: 복잡한 객체는 별도의 인터페이스나 타입으로 정의
- **strict 모드 권장**: `tsconfig.json`에서 strict 모드 활성화

### 3.5 스타일링 규칙
- **Tailwind CSS 우선**: 인라인 스타일 대신 Tailwind 유틸리티 클래스 사용
- **Shadcn/ui 활용**: 기존 UI 컴포넌트를 우선적으로 사용하고, 필요시 커스터마이징
- **반응형 디자인**: 모바일 우선 접근 방식으로 반응형 디자인 구현

### 3.6 상태 관리
- **서버 상태**: React Query 또는 SWR을 활용하여 서버 상태 관리 (필요시)
- **클라이언트 상태**: `useState`, `useReducer` 등 React 훅 활용
- **전역 상태**: Context API 또는 Zustand 등 경량 상태 관리 라이브러리 (필요시)

### 3.7 폴더 구조
- `app/`: Next.js App Router 페이지 및 라우트
- `components/`: 재사용 가능한 컴포넌트
  - `components/ui/`: Shadcn/ui 기반 UI 컴포넌트
  - 기능별 컴포넌트는 적절한 하위 폴더로 구성
- `lib/`: 유틸리티 함수 및 헬퍼
- `hooks/`: 커스텀 React 훅
- `types/`: TypeScript 타입 정의 (필요시)

### 3.8 Next.js App Router 규칙
- **클라이언트 컴포넌트**: 상호작용이 필요한 컴포넌트는 파일 최상단에 `'use client'` 지시어 추가
  - useState, useEffect, 이벤트 핸들러 등을 사용하는 컴포넌트
  - 브라우저 API를 사용하는 컴포넌트
- **서버 컴포넌트 기본**: 기본적으로 서버 컴포넌트로 작성하고, 필요한 경우에만 클라이언트 컴포넌트로 변경
- **Import 경로**: 절대 경로 별칭 `@/` 사용
  - 예: `@/components/ui/button`, `@/lib/utils`, `@/hooks/use-todo`
  - 상대 경로(`../components/...`) 대신 절대 경로 사용

### 3.9 예외 사항
- **외부 라이브러리 컴포넌트**: shadcn/ui 등 외부 라이브러리에서 제공하는 컴포넌트는 해당 라이브러리의 컨벤션을 따름
  - shadcn/ui 컴포넌트는 일반 `function` 키워드 사용 가능 (컴포넌트 내부 로직만 규칙 적용)
  - 라이브러리에서 제공하는 기본 구조와 명명 규칙은 유지

## 4. 코드 품질 관리

### 4.1 ESLint 준수
- ESLint 규칙을 준수하며, 린트 오류는 즉시 해결
- `eslint.config.mjs`에 정의된 규칙을 따름

### 4.2 코드 리뷰 체크리스트
- [ ] 모든 함수에 한글 주석 및 JSDoc 작성
- [ ] TypeScript 타입 오류 없음
- [ ] ESLint 오류 및 경고 없음
- [ ] 로딩/빈 상태/오류 상태 UI 구현
- [ ] 사용자에게 한글 오류 메시지 제공
- [ ] 파일명 규칙 준수 (파스칼 케이스 컴포넌트)
- [ ] 화살표 함수 사용

## 5. Git 커밋 규칙 (권장)

- 커밋 메시지는 한글로 작성 가능하지만, 영어도 허용
- 명확하고 간결한 커밋 메시지 작성
- 기능별로 적절히 커밋 분리

## 6. 추가 고려사항

- **성능 최적화**: 
  - 이미지 최적화 (`next/image` 사용)
  - 코드 스플리팅 및 동적 임포트 활용
  - 불필요한 리렌더링 방지 (`React.memo`, `useMemo`, `useCallback` 적절히 사용)

- **접근성**:
  - 시맨틱 HTML 사용
  - ARIA 속성 적절히 활용
  - 키보드 네비게이션 지원

- **보안**:
  - 환경 변수를 통한 민감한 정보 관리
  - 사용자 입력 검증 및 Sanitization
  - Supabase RLS (Row Level Security) 정책 활용
